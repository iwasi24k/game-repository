//==============================================================================
// File        : InputKeyboard.h
//------------------------------------------------------------------------------
// Author      : ix.U
// Created     : 2025-08-20
// Last Update : 2025-08-29
//------------------------------------------------------------------------------
// 
//==============================================================================
#ifndef INPUT_KEYBOARD_H
#define INPUT_KEYBOARD_H

#include <Windows.h>

namespace Framework {

    class InputKeyboard {
    private:
        static inline HWND m_hWnd = nullptr;

        static inline BYTE m_CurrentKey[256] = {};
        static inline BYTE m_PreviousKey[256] = {};

    public:
#include "InputKeyboard.inl"

        //==============================================================================
        // 
        // ◆ キーが現在「押され続けている」かを判定（長押し検出）
        // 
        // 引数：
        // - key : 判定したいキー（例：KB::W, KB::Space)
        // 
        // 戻り値：
        // - true  : 今フレーム時点で該当キーが押されている
        // - false : 今フレーム時点で該当キーが押されていない
        // 
        // 用途例：移動処理（WASD）、押しっぱなしアクション、連続操作の判定など
        //
        //==============================================================================
        static bool IsKeyDown(Key key);

        //==============================================================================
        // 
        // ◆ キーが「今フレームで新たに押された」かを判定（単押し・トリガー検出）
        // 
        // 引数：
        // - key : 判定したいキー（例：KB::W, KB::Space)
        // 
        // 戻り値：
        // - true  : 前フレームでは未入力、今フレームで押された場合のみ
        // - false : 前フレームでも押されていた、または今フレームで押されていない
        // 
        // 用途例：ジャンプ・決定・モード切替などの1回反応が必要な操作
        //
        //==============================================================================
        static bool IsKeyTriggered(Key key);

        //==============================================================================
        // 
        // ◆ キーが「今フレームで離された」かを判定（リリース検出）
        // 
        // 引数：
        // - key : 判定したいキー（例：KB::W, KB::Space)
        // 
        // 戻り値：
        // - true  : 前フレームでは押されており、今フレームで離された場合のみ
        // - false : 前フレームでも押されていなかった、または今フレームで押されている
        //
        // 用途例：押し離しでの入力受理、チャージ解除、ステップ実行のタイミング取得など
        //
        //==============================================================================
        static bool IsKeyReleased(Key key);



    private:
        static void Initialize(HWND hwnd);
        static void Update();

        friend class Application;

    };

    using KB = InputKeyboard::Key;
}

#endif // INPUT_KEYBOARD_H